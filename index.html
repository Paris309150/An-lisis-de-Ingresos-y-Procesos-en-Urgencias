<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis de Ingresos - SAR Arpillerista Elsa Romo Aravena</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        h1, h2 {
            color: #333;
        }
        canvas {
            margin-top: 20px;
        }
        .highlight {
            background-color: #f8f8f8;
            border-left: 4px solid #2196F3;
            padding: 10px;
            margin: 20px 0;
            font-weight: bold;
        }
        .summary {
            background-color: #e8f5e9;
            border: 1px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
            font-weight: bold;
            color: #2e7d32;
        }
    </style>
</head>
<body>

    <h1>Análisis de Ingresos y Procesos en Urgencias</h1>
    <div class="summary">
        <p><strong>Datos recopilados desde:</strong> 02-12-24</p>
        <p><strong>Total de pacientes atendidos:</strong> 1517</p>
        <p><strong>Turno con más admitidos:</strong> Turno 2 (94 pacientes el 26-12-24)</p>
        <p><strong>Turno con más altas administrativas:</strong> Turno 1 (19 altas el 02-12-24)</p>
        <p><strong>Turno con más traslados:</strong> Turno 2 (3 traslados el 26-12-24)</p>
        <p><strong>Turno con más derivaciones al SAR:</strong> Turno 2 (4 derivaciones el 15-12-24)</p>
    </div>

    <div class="highlight">
        Información correspondiente a los Turnos 1, 2 y 3 del SAR Arpillerista Elsa Romo Aravena.
    </div>

    <!-- Gráficos Comparativos para Turnos 1, 2 y 3 -->
    <h2>Gráfico Comparativo - Turno 1 (Por Día)</h2>
    <canvas id="graficoTurno1Dias" width="400" height="200"></canvas>

    <h2>Gráfico Comparativo - Turno 2 (Por Día)</h2>
    <canvas id="graficoTurno2Dias" width="400" height="200"></canvas>

    <h2>Gráfico Comparativo - Turno 3 (Por Día)</h2>
    <canvas id="graficoTurno3Dias" width="400" height="200"></canvas>

    <!-- Gráfico de Consolidado por Establecimiento -->
    <h2>Gráfico de Consolidado por Establecimiento</h2>
    <canvas id="graficoEstablecimientos" width="800" height="400"></canvas>

    <!-- Gráfico de Tendencias -->
    <h2>Gráfico de Tendencias</h2>
    <canvas id="graficoTendencias" width="400" height="200"></canvas>

    <script>
        // Gráfico Comparativo - Turno 1 (Por Día)
        const datosTurno1 = {
            labels: ["02-12", "05-12", "07-12 20:00-08:00", "09-12", "12-12", "14-12 20:00-08:00", "16-12", "19-12", "21-12 20:00-08:00", "23-12", "25-12 20:00-08:00"],
            datasets: [
                { label: "Ingresos", data: [60, 53, 30, 69, 53, 31, 59, 63, 31, 79, 37], backgroundColor: "rgba(75, 192, 192, 0.6)" },
                { label: "Altas AD", data: [19, 14, 0, 12, 1, 0, 3, 3, 0, 5, 1], backgroundColor: "rgba(54, 162, 235, 0.6)" },
                { label: "Traslados Ambulancia", data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], backgroundColor: "rgba(255, 206, 86, 0.6)" },
                { label: "Procedimiento Policial", data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], backgroundColor: "rgba(153, 102, 255, 0.6)" },
                { label: "Derivados al SAR", data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], backgroundColor: "rgba(255, 99, 132, 0.6)" }
            ]
        };

        const ctxTurno1 = document.getElementById('graficoTurno1Dias').getContext('2d');
        new Chart(ctxTurno1, {
            type: 'bar',
            data: datosTurno1,
            options: { responsive: true, scales: { y: { beginAtZero: true } } }
        });

        // Gráfico Comparativo - Turno 2 (Por Día)
        const datosTurno2 = {
            labels: ["03-12", "06-12", "08-12", "10-12", "13-12", "15-12", "17-12", "20-12", "22-12 (08:00-20:00)", "24-12", "26-12"],
            datasets: [
                { label: "Ingresos", data: [66, 70, 68, 55, 48, 48, 54, 48, 69, 39, 94], backgroundColor: "rgba(75, 192, 192, 0.6)" },
                { label: "Altas AD", data: [17, 14, 1, 1, 0, 2, 6, 4, 0, 5, 3], backgroundColor: "rgba(54, 162, 235, 0.6)" },
                { label: "Traslados Ambulancia", data: [1, 1, 5, 1, 2, 0, 1, 0, 1, 2, 3], backgroundColor: "rgba(255, 206, 86, 0.6)" },
                { label: "Procedimiento Policial", data: [4, 4, 3, 1, 3, 2, 4, 3, 6, 2, 2], backgroundColor: "rgba(153, 102, 255, 0.6)" },
                { label: "Derivados al SAR", data: [0, 0, 2, 2, 0, 4, 0, 1, 1, 1, 0], backgroundColor: "rgba(255, 99, 132, 0.6)" }
            ]
        };

        const ctxTurno2 = document.getElementById('graficoTurno2Dias').getContext('2d');
        new Chart(ctxTurno2, {
            type: 'bar',
            data: datosTurno2,
            options: { responsive: true, scales: { y: { beginAtZero: true } } }
        });

        // Gráfico Comparativo - Turno 3 (Por Día)
        const datosTurno3 = {
            labels: ["04-12", "07-12", "14-12", "15-12", "18-12", "21-12"],
            datasets: [
                { label: "Ingresos", data: [52, 54, 59, 39, 65, 44], backgroundColor: "rgba(75, 192, 192, 0.6)" },
                { label: "Altas AD", data: [3, 1, 4, 0, 9, 0], backgroundColor: "rgba(54, 162, 235, 0.6)" },
                { label: "Traslados Ambulancia", data: [0, 0, 1, 0, 2, 0], backgroundColor: "rgba(255, 206, 86, 0.6)" },
                { label: "Procedimiento Policial", data: [0, 0, 6, 5, 4, 0], backgroundColor: "rgba(153, 102, 255, 0.6)" },
                { label: "Derivados al SAR", data: [0, 0, 0, 3, 1, 0], backgroundColor: "rgba(255, 99, 132, 0.6)" }
            ]
        };

        const ctxTurno3 = document.getElementById('graficoTurno3Dias').getContext('2d');
        new Chart(ctxTurno3, {
            type: 'bar',
            data: datosTurno3,
            options: { responsive: true, scales: { y: { beginAtZero: true } } }
        });

        // Gráfico de Consolidado por Establecimiento
        const labelsEstablecimientos = [
            "Adriana Madrid De Costabal [CGR]", "Bollenar [PSR]", "CESFAM Alhué", "CESFAM Dr. Raúl Moya", 
            "CESFAM FLORENCIA", "CESFAM Llay Llay", "CESFAM Pdta. Michelle Bachelet Jeria", "Cecof Codigua", 
            "Centro de Salud Familiar Alto Jahuel", "Centro de Salud Familiar Calera de Tango", 
            "Centro de Salud Familiar Carol Urzua", "Centro de Salud Familiar Dr Pedro Jauregui", 
            "Centro de Salud Familiar Dr. Carlos Lorca", "Centro de Salud Familiar Dr. Héctor García", 
            "Centro de Salud Familiar Lo Hermida", "Cesfam Alfarera Rosa Reyes Vilches", "Consultorio San Ramón", 
            "Cristo Vive [CSF]", "Dr. Alberto Allende [CGR]", "Dr. Anibal Ariztia [CSF]", 
            "Dr. Fernando Monckeberg [CGR]", "Dr. Francisco Boris Soler [Cesfam]", 
            "Dr. Gustavo Molina [CESFAM]", "Dr. Steeger [CGU]", "E. Elgueta [CGR]", 
            "Eduardo Frei Montalva [CESFAM]", "Eduardo Frei Ruiz Tagle", "El Monte [CGR]", 
            "Gabriela Mistral [CESFAM]", "Garin [CESFAM]", "PSR CHOROMBO", "Pablo Lizama [CECOF]", 
            "Padre Demetrio [CECOF]", "Pahuilmo [PSR]", "Pan De Azucar [PSR]", 
            "Pedro de Valdivia [CESFAM]", "Posta de Salud Rural El Prado", "Posta de Salud Rural Loica", 
            "PsrPabellon", "San Manuel [CGR]", "San Pedro [PSR]", "Santa Anselma [CESFAM]", 
            "Tongoy [CGR]", "[CESFAM] N° 1 Dr. Ramón Corbalán Melgarejo"
        ];

        const dataEstablecimientos = [
            4, 22, 2, 1, 206, 1, 1, 8, 2, 1, 1, 1, 1, 1, 1, 40, 1, 1, 6, 2, 
            1, 429, 1, 1, 313, 1, 1, 9, 1, 1, 2, 19, 61, 7, 1, 2, 1, 1, 15, 
            61, 4, 1, 1, 1
        ];

        const ctxEstablecimientos = document.getElementById('graficoEstablecimientos').getContext('2d');
        new Chart(ctxEstablecimientos, {
            type: 'bar',
            data: {
                labels: labelsEstablecimientos,
                datasets: [{
                    label: "Pacientes por Establecimiento",
                    data: dataEstablecimientos,
                    backgroundColor: "rgba(75, 192, 192, 0.6)"
                }]
            },
            options: {
                responsive: true,
                scales: { y: { beginAtZero: true } },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `${context.label}: ${context.raw} pacientes`;
                            }
                        }
                    }
                }
            }
        });

        // Gráfico de Tendencias
        const datosTendencias = {
            labels: ["Ingresos", "Altas AD", "Traslados Ambulancia", "Procedimiento Policial", "Derivados al SAR"],
            datasets: [
                {
                    label: "Turno 1",
                    data: [526, 43, 0, 0, 0],
                    borderColor: "rgba(54, 162, 235, 1)",
                    backgroundColor: "rgba(54, 162, 235, 0.2)",
                    fill: true
                },
                {
                    label: "Turno 2",
                    data: [678, 49, 14, 30, 11],
                    borderColor: "rgba(75, 192, 192, 1)",
                    backgroundColor: "rgba(75, 192, 192, 0.2)",
                    fill: true
                },
                {
                    label: "Turno 3",
                    data: [313, 19, 5, 15, 4],
                    borderColor: "rgba(255, 206, 86, 1)",
                    backgroundColor: "rgba(255, 206, 86, 0.2)",
                    fill: true
                }
            ]
        };

        const ctxTendencias = document.getElementById('graficoTendencias').getContext('2d');
        new Chart(ctxTendencias, {
            type: 'line',
            data: datosTendencias,
            options: { responsive: true, scales: { y: { beginAtZero: true } } }
        });
    </script>
</body>
</html>
